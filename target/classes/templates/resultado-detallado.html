<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Resultado Detallado</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Añadido para responsividad -->
	<link rel="stylesheet" th:href="@{/css/home-estudiante.css}">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" th:href="@{https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css}"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>

	<!--FAVICON-->
	<link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/6854/6854590.png" type="image/x-icon">

	<!--FONT-->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300&display=swap" rel="stylesheet">

	<link rel="stylesheet" type="text/css" href="/css/menu.css">
</head>

<style>
	body {
		background-image: url('');
		background-size: cover;
		/* Ajusta la imagen al tamaño del cuerpo */
		background-position: center;
		/* Centra la imagen en el cuerpo */
	}

	body {
		background-image: url('');
		/* Puedes establecer una URL de imagen aquí */
		background-size: cover;
		/* Ajusta la imagen para cubrir el cuerpo */
		background-position: center;
		/* Centra la imagen en el cuerpo */
	}

	h1 {
		text-align: center;
	}

	.table-container {
		max-width: 100%;
		/* Max ancho para la tabla */
		overflow-x: auto;
		/* Permitir desplazamiento horizontal si es necesario */
	}

	.custom-table {
		width: 100%;
		border-collapse: collapse;
		border: 2px solid #343a40;
		margin: 20px auto;
		background-color: #ffffff;
		color: #212529;
	}

	.custom-table th,
	.custom-table td {
		border: 2px solid #343a40;
		padding: 10px;
		text-align: center;
	}

	.custom-table th {
		background-color: blue;
		color: white;
	}

	.custom-table tbody tr:nth-child(even) {
		background-color: #f8f9fa;
	}

	.custom-table tbody tr:hover {
		background-color: #e9ecef;
	}
</style>

<script>
	document.addEventListener("DOMContentLoaded", function () {
		var nivelCells = document.querySelectorAll("td[class^='nivel-']");

		nivelCells.forEach(function (cell) {
			var nivel = cell.textContent.trim();
			if (nivel === "4") {
				cell.style.backgroundColor = "";
			} else if (nivel === "3") {
				cell.style.backgroundColor = "";
			} else if (nivel === "2") {
				cell.style.backgroundColor = "";
			} else if (nivel === "1") {
				cell.style.backgroundColor = "";
			}
		});
	});
</script>
<script>
	function calcularNivel(puntaje) {
		if (puntaje == 0) {
			return 0;
		} else {
			return "N/A"; // Puedes cambiar esto según tu lógica si el puntaje no está en ningún rango.
		}
	}
</script>
<script>
	function calcularNivel(puntaje) {
		if (puntaje >= 191 && puntaje <= 300) {
			return 4;
		} else if (puntaje >= 156 && puntaje <= 190) {
			return 3;
		} else if (puntaje >= 126 && puntaje <= 155) {
			return 2;
		} else if (puntaje > 0 && puntaje <= 125) {
			return 1;
		} else if (puntaje == 0) {
			return 0;
		} else {
			return "N/A"; // Puedes cambiar esto según tu lógica si el puntaje no está en ningún rango.
		}
	}

	function calcularIngles(puntaje) {
		if (puntaje >= 191 && puntaje <= 300) {
			return "B2";
		} else if (puntaje >= 156 && puntaje <= 190) {
			return "B1";
		} else if (puntaje >= 140 && puntaje <= 155) {
			return "A2";
		} else if (puntaje >= 125 && puntaje <= 140) {
			return "A1";
		} else if (puntaje >= 0 && puntaje <= 125) {
			return "A0";
		} else {
			return "N/A"; // Puedes cambiar esto según tu lógica si el puntaje no está en ningún rango.
		}
	}

</script>

<body>

	<header>
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<div class="container">
				<div class="ml-auto mr-4" style="display: inline-block;">
					<button id="btn-login" class="button_cerrar">
						<a th:href="@{/login}" style="text-decoration: none;">
							<span
								style="font-family: 'Roboto Slab', serif; font-weight: bolder; font-size: 120%; padding-left: 5px; padding-right: 5px;">Cerrar
								sesión</span>
						</a>
					</button>
				</div>
			</div>
		</nav>
	</header>
	<div>
		<div class="text-center">
			<h1 class="display-4 fw-bold text-primary mb-4">Resultado Detallado</h1>
		</div>

		<div class="container">
			<div class="table-container">
				<table class="table table-striped" style="border: 2px solid black; margin-top:20px;">
					<thead>
						<tr style="text-align: center; background-color: blue; color: white;">
							<th style="border: 1px solid #000;">Primer Nombre</th>
							<th style="border: 1px solid #000;">Primer Apellido</th>
							<th style="border: 1px solid #000;">Número Documento</th>
							<th style="border: 1px solid #000;">Número Registro</th>
							<th style="border: 1px solid #000;">Puntaje Total</th>
							<th style="border: 1px solid #000;">Nivel</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td style="text-align: center; border: 1px solid #000;"
								th:text="${calificacion.estudiante.primerNombre}"></td>
							<td style="text-align: center; border: 1px solid #000;"
								th:text="${calificacion.estudiante.primerApellido}"></td>
							<td style="text-align: center; border: 1px solid #000;"
								th:text="${calificacion.estudiante.numeroDocumento}"></td>
							<td style="text-align: center; border: 1px solid #000;"
								th:text="${calificacion.estudiante.numeroRegistro}"></td>
							<td style="text-align: center; border: 1px solid #000;"
								th:text="${calificacion.puntajeTotal}">
							</td>
							<td style="text-align: center; border: 1px solid #000;">
								<script th:inline="javascript">
									var puntaje1 = /*[(${calificacion.puntajeTotal} == 'N/A' ? 0 : ${calificacion.puntajeTotal})]*/ 0;
									var nivel1 = calcularNivel(puntaje1);
									document.write('<span class="badge badge-primary nivel-' + nivel1 + '">' + nivel1 + '</span>');
								</script>
							</td>
						</tr>
					</tbody>
				</table>

				<center>
					<table class="custom-table">
						<thead style="vertical-align: middle; text-align: center; background-color:blue; color: white;">
							<tr>
								<th style="padding: 12px;">MATERIA</th>
								<th style="padding: 12px;">PUNTAJE</th>
								<th style="padding: 12px;">NIVEL</th>
							</tr>
						</thead>

						<tbody>
							<tr style="background-color: #f2f2f2;">
								<td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Puntaje en
									Comunicación
									Escrita</td>
								<td style="border: 1px solid #ddd; padding: 8px; text-align: center;"
									th:text="${calificacion.comEscrita}" readonly></td>
								<td th:inline="javascript"
									style="border: 1px solid #ddd; padding: 8px; text-align: center;">
									<script>
										var puntaje2 = /*[(${calificacion.comEscrita} == 'N/A' ? 0 : ${calificacion.comEscrita})]*/ 0;
										var nivel2 = calcularNivel(puntaje2);
										document.write('<span style="padding: 4px 8px; border-radius: 5px; background-color: #007bff; color: white;">' + nivel2 + '</span>');
									</script>
								</td>
							</tr>

							<tr style="background-color: #f2f2f2;">
								<td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Puntaje en
									Razonamiento
									Cuantitativo</td>
								<td style="border: 1px solid #ddd; padding: 8px; text-align: center;"
									th:text="${calificacion.razonCuantitativo}" readonly></td>
								<td th:inline="javascript"
									style="border: 1px solid #ddd; padding: 8px; text-align: center;">
									<script>
										var puntaje3 = /*[(${calificacion.razonCuantitativo} == 'N/A' ? 0 : ${calificacion.razonCuantitativo})]*/ 0;
										var nivel3 = calcularNivel(puntaje3);
										document.write('<span style="padding: 4px 8px; border-radius: 5px; background-color: #007bff; color: white;">' + nivel3 + '</span>');
									</script>
								</td>
							</tr>

							<tr style="background-color: #f2f2f2;">
								<td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Puntaje en Lectura
									Crítica</td>
								<td style="border: 1px solid #ddd; padding: 8px; text-align: center;"
									th:text="${calificacion.lecturaCritica}" readonly></td>
								<td th:inline="javascript"
									style="border: 1px solid #ddd; padding: 8px; text-align: center;">
									<script>
										var puntaje4 = /*[(${calificacion.lecturaCritica} == 'N/A' ? 0 : ${calificacion.lecturaCritica})]*/ 0;
										var nivel4 = calcularNivel(puntaje4);
										document.write('<span style="padding: 4px 8px; border-radius: 5px; background-color: #007bff; color: white;">' + nivel4 + '</span>');
									</script>
							<tr style="background-color: #f2f2f2;">
								<td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Puntaje en
									Competencias
									Ciudadanas</td>
								<td style="border: 1px solid #ddd; padding: 8px; text-align: center;"
									th:text="${calificacion.compeCiudadanas}" readonly></td>
								<td th:inline="javascript"
									style="border: 1px solid #ddd; padding: 8px; text-align: center;">
									<script>
										var puntaje5 = /*[(${calificacion.compeCiudadanas} == 'N/A' ? 0 : ${calificacion.compeCiudadanas})]*/ 0;
										var nivel5 = calcularNivel(puntaje5);
										document.write('<span style="padding: 4px 8px; border-radius: 5px; background-color: #007bff; color: white;">' + nivel5 + '</span>');
									</script>
								</td>
							</tr>

							<tr style="background-color: #f2f2f2;">
								<td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Puntaje en Inglés
								</td>
								<td style="border: 1px solid #ddd; padding: 8px; text-align: center;"
									th:text="${calificacion.ingles}" readonly></td>
								<td th:inline="javascript"
									style="border: 1px solid #ddd; padding: 8px; text-align: center;">
									<script>
										var puntaje6 = /*[(${calificacion.ingles} == 'N/A' ? 0 : ${calificacion.ingles})]*/ 0;
										var nivel6 = calcularNivel(puntaje6);
										document.write('<span style="padding: 4px 8px; border-radius: 5px; background-color: #007bff; color: white;">' + nivel6 + '</span>');
									</script>

							<tr style="background-color: #f2f2f2;">
								<td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Puntaje en
									Formulación
									de Proyectos</td>
								<td style="border: 1px solid #ddd; padding: 8px; text-align: center;"
									th:text="${calificacion.formProyectos}" readonly></td>
								<td th:inline="javascript"
									style="border: 1px solid #ddd; padding: 8px; text-align: center;">
									<script>
										var puntaje7 = /*[(${calificacion.formProyectos} == 'N/A' ? 0 : ${calificacion.formProyectos})]*/ 0;
										var nivel7 = calcularNivel(puntaje7);
										document.write('<span style="padding: 4px 8px; border-radius: 5px; background-color: #007bff; color: white;">' + nivel7 + '</span>');
									</script>
								</td>
							</tr>

							<tr style="background-color: #f2f2f2;">
								<td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Puntaje en
									Pensamiento
									Científico</td>
								<td style="border: 1px solid #ddd; padding: 8px; text-align: center;"
									th:text="${calificacion.penCientifico}" readonly></td>
								<td th:inline="javascript"
									style="border: 1px solid #ddd; padding: 8px; text-align: center;">
									<script>
										var puntaje8 = /*[(${calificacion.penCientifico} == 'N/A' ? 0 : ${calificacion.penCientifico})]*/ 0;
										var nivel8 = calcularNivel(puntaje8);
										document.write('<span style="padding: 4px 8px; border-radius: 5px; background-color: #007bff; color: white;">' + nivel8 + '</span>');
									</script>
								</td>
							</tr>

							<tr style="background-color: #f2f2f2;">
								<td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Puntaje en Diseño de
									Software</td>
								<td style="border: 1px solid #ddd; padding: 8px; text-align: center;"
									th:text="${calificacion.disenoSoftware}" readonly></td>
								<td th:inline="javascript"
									style="border: 1px solid #ddd; padding: 8px; text-align: center;">
									<script>
										var puntaje9 = /*[(${calificacion.disenoSoftware} == 'N/A' ? 0 : ${calificacion.disenoSoftware})]*/ 0;
										var nivel9 = calcularNivel(puntaje9);
										document.write('<span style="padding: 4px 8px; border-radius: 5px; background-color: #007bff; color: white;">' + nivel9 + '</span>');
									</script>
							</tr>
							<tr style="background-color: #f2f2f2;">
								<td style="border: 1px solid #ddd; padding: 8px; text-align: left;">Nivel de Inglés</td>
								<td style="border: 1px solid #ddd; padding: 8px; text-align: center;"
									th:text="${calificacion.ingles}" readonly></td>
								<td th:inline="javascript"
									style="border: 1px solid #ddd; padding: 8px; text-align: center;">
									<script>
										var puntaje6 = /*[(${calificacion.ingles} == 'N/A' ? 0 : ${calificacion.ingles})]*/ 0;
										var nivel = calcularIngles(puntaje6);
										var nivel6 = calcularNivel(puntaje6);
										document.write('<span style="padding: 4px 8px; border-radius: 5px; background-color: #007bff; color: white;">' + nivel + '</span>');
									</script>
							</tr>
						</tbody>
					</table>
				</center>


				<center style="margin-top: 20px; margin-bottom: 41px; ">
					<div>
						<a th:href="@{/estudiantes/resultado/{numeroDocumento}(numeroDocumento = ${calificacion.estudiante.numeroDocumento})}"
							class="button"
							style="text-decoration: none;padding:15px; margin:20px; background-color: #C22730; color: white; border-radius: 10px; box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);">Volver</a>
					</div>

				</center>

</body>
</html>